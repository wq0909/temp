# the New Header## Why?### Header 2012 之前Header遍布各处，实现方式形形色色，同等功能重复实现。这样一来，如果要统一修改Header上的某部分内容，将是非常可怕的事情，不仅修改的工作量很大，而且很容易出现遗漏，改一次则身心憔悴。所以，Header 2012 诞生了。### the New Header 之前Header 2012 的出现，改善了Header散落的现状，降低了维护的成本，减少了使用者的工作量。但是，过多的对外开放版本，较复杂的配置，让使用者在使用时，还需耗费较多脑力去挑选和配置，从而使得Header 2012的推广受到一定阻碍。至此，Header的新一轮演变顺势出现了，the New Header被召唤了出来。## What?在 Header 2012 的基础上，进一步精简模板和配置，使得使用更简便，维护更轻松。另外，**the New Header**会处于不断演变和逐渐完善的过程中，欢迎各位提出宝贵的意见和建议。以下是**the New Header**的区域及模块划分：**the New Header**  |- 灯塔（beacon）  &nbsp; &nbsp; |- 用户（user）  &nbsp; &nbsp; |- 导航（nav）  |- 搜索（searchbar）  &nbsp; &nbsp; |- 搜索类别（type）  &nbsp; &nbsp; |- 静态推荐（static）  &nbsp; &nbsp; |- 动态搜索（dynamic）  &nbsp; &nbsp; |- 高级搜索（advanced）  |- 杂项（sundry）  &nbsp; &nbsp; |- 推广链接（anchor）  &nbsp; &nbsp; |- 推广动作（action）  &nbsp; &nbsp; |- 标题扩展（extend）**the New Header**，将整体拆分为**三个区域**——beacon、searchbar和sundry，每一个部分又由多个模块组成。这样的划分，不仅表现在html结构上，也体现在JS代码层面（具体查看How的部分）。**the New Header**目前对外提供**两个模板**——完整版和通用版（推荐）。* 完整版，主要用于alibaba首页等重点页面中。* 通用版，主要用于频道等页面中，与完整版的主要区别是缩小的searchbar。## How?**the New Header**的使用非常简单，一个通用的使用方式如下：	<script>	// 配置模板	AE.define('common.header.config', function(){		return {};	});	</script>		[调用模板]选择模板，根据需求配置模板，就是这么简单。需要注意的是，**配置必须写在模板调用之前**，或者不提供配置，这样就会使用默认配置。### 选择模板根据需求选择对应的header模板。一般推荐使用通用版。如果模板不符合你的需求，请将需求提交给**陈国平**、**黎敏**或**叶长春**。### 定制模板如果需要定制模板的话，需要在调用**the New Header**之前，添加HOZ的模块`'common.header.config'`。示例代码如下：	AE.define('common.header.config', function(){		return {};	});一份完整的配置如下：	{		mods: {			beacon: ['user', 'nav'],			searchbar: ['type', 'static', 'dynamic', 'advanced'],			sundry: ['anchor', 'action', 'extend']		},		// beacon: {},		searchbar: {			placeholder: 'Please input your keyword.',			data : ['Products', 'Suppliers', 'Buyers'],		},		// sundry: {},		initComplete: function(beacon, searchbar, sundry){				searchbar.addField('field0', '0');	        			searchbar.removeField('field0');	        	searchbar.setFormAction('http://www.alibaba.com/search');			sundry.anchor.html('<a href="javascript:;" class="ui-header-anchor-link">anchor</a>');			sundry.action.buttonText('Welcome to Alibaba').href('http://www.alibaba.com');			sundry.extend.html('Hello');		}	}#### 模块 config.mods要使用的模块，结构为：	区域: [模块名称, ...]可能的配置有：	(1) beacon: undefined	(2) beacon: null	(3) beacon: []	(4) beacon: ['user']其中，  (1)表示使用完整配置，显示所有属于该区域的模块，等价于`beacon: ['user', 'nav']`;  (2)表示不展示该区域；  (3)表示展示该区域的基础模块，一般每个区域都会有自己的基础模块，在展示该区域时，基础模块也会被加载，另外基础模块是不能被指定的；  (4)表示定制区域的模块，**模块顺序无先后**。#### 区域配置 config.searchbar各个区域所需的配置信息，目前仅searchbar需要配置。* config.searchbar	* placeholder：搜索框无关键词时，显示的文案	* data：指定搜索类型，**给定顺序决定展示顺序**        内部给定的别名有：Products，Suppliers和Buyers        外部自行定义的type格式如下：			{				'action': config.aisnServer + '/trade/search',				'name': 'Products',				'typeValue': 'product_en',				'statis': 'p',				'recentUrl': 'http://www.alibaba.com/products/{@}.html'			}#### 内容定制 initComplete在**the New Header**渲染完成后，对部分模块的内容进行调整。按照区域提供调整方法，目前beacon为开放方法。* searchbar	* addField 添加隐藏字段        参数`name` 字段的name属性        参数`value` 字段的值	* setFormAction 设置表单提交的action        参数`url` 需修改成的url* sundry	* anchor		* html 修改链接的内容            参数`html` 需修改成的html	* action		* buttonText 修改按钮文案            参数`text` 需修改成的文案		* href 点击跳转的链接            参数`url` 跳转至的链接	* extend		* html 修改扩展区内容            参数`html` 需修改成的内容